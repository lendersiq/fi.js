<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../../styles/base.css">
  <title>LendersIQ</title>
</head>
<body>
  <script>
    // App configuration with forms integration
    window.appConfig = {
      description: "FI.js Forms Demo - showcasing all HTML form elements and their integration with display processing",
      forms: [
        { 
          id: "Portfolio",
          type: "text", 
          label: "Customer Name", 
          value: "",
          pattern: "[A-Za-z\\s]+"
        },
        { 
          id: "type",
          type: "select", 
          label: "Loan Type", 
          value: "", 
          options: [
            { value: "Commercial", label: "Commercial" },
            { value: "Commercial_Real_Estate", label: "Commercial Real Estate" },
            { value: "Residential_Real_Estate", label: "Residential Real Estate" },
            { value: "Consumer", label: "Consumer" },
            { value: "Equipment", label: "Equipment" },
            { value: "Home_Equity", label: "Home Equity" },
            { value: "Letter_of_Credit", label: "Letter of Credit" }
          ]
        },
        { 
          id: "totalProfit",
          type: "number", 
          label: "Current Profit", 
          value: 0,
          min: 0,
          step: 0,
          disabled: true
        },
        { 
          id: "newPrincipal",
          type: "number", 
          label: "Principal Amount", 
          value: 0,
          min: 0,
          step: 1000
        },
        { 
          id: "rate",
          type: "rate", 
          label: "Proposed Rate (%)", 
          value: 8,
          min: 0,
          max: 30,
          step: 0.125
        },
        { 
          id: "fees",
          type: "number", 
          label: "Fees Collected", 
          value: 0,
          min: 0,
          step: 100
        },
        { 
          id: "term",
          type: "range", 
          label: "Contractual Term (months)", 
          value: 60, 
          min: 1, 
          max: 360,
          step: 1,
          unit: " months"
        },
        { 
          id: "amort",
          type: "range", 
          label: "Amortization Term (months)", 
          value: 0, 
          min: 0, 
          max: 360,
          step: 1,
          unit: " months"
        },
        { 
          id: "ltv",
          type: "select", 
          label: "Loan to Value", 
          value: ".80", 
          options: [
            { value: ".70", label: "70%" },
            { value: ".80", label: "80%" },
            { value: ".90", label: "90%" },
            { value: ".95", label: "95%" },
            { value: "1.00", label: "100%" }
          ]
        },
        { 
          id: "risk",
          type: "select", 
          label: "Risk Rating", 
          value: "3", 
          options: [
            { value: "1", label: "1 - Excellent" },
            { value: "2", label: "2 - Good" },
            { value: "3", label: "3 - Average" },
            { value: "4", label: "4 - Below Average" },
            { value: "5", label: "5 - Poor" }
          ]
        },
        { 
          id: "newRelationship",
          type: "checkbox", 
          label: "New Relationship", 
          value: ["insurance"], 
          options: [
            { value: true, label: "new operating account" }
          ]
        },
        { 
          id: "notes",
          type: "textarea", 
          label: "Additional Notes", 
          value: "",
          rows: 3,
          placeholder: "Enter any additional information..."
        },
        { 
          id: "principal",
          type: "hidden", 
          label: "Principal", 
          value: 0 
        }
      ],
      display: [
        { heading: "Borrower", id: "Portfolio", column_type: "form", data_type: "string" },
        { heading: "Loan Type", id: "type", column_type: "form", data_type: "string" },
        { heading: "Loan Request", id: "newPrincipal", column_type: "form", data_type: "currency" },
        { heading: "Monthly Payment", id: "payment", column_type: "function", function: "calculateMonthlyPayment(newPrincipal, rate, term, amort)", data_type: "currency" },
        { heading: "Total Interest", id: "totalInterest", column_type: "function", function: "calculateTotalInterest(newPrincipal, rate, term, amort)", data_type: "currency" },
        { heading: "Cost of Funds", id: "costOfFunds", column_type: "function", function: "costofFundsSlice(newPrincipal, rate, term, amort)", data_type: "currency" },
        { heading: "Average Principal", id: "averagePrincipal", column_type: "function", function: "averagePrincipalByTerm(newPrincipal, payment, rate, term)", data_type: "currency" },
        { heading: "Expected Loss Provision", id: "expectedLossProvision", column_type: "function", function: "expectedLossProvision(risk, newPrincipal, averagePrincipal, ltv, null)", data_type: "currency" },
        { heading: "Profit", id: "newProfit", column_type: "function", function: "loanProfit(1, newPrincipal, rate, risk, new Date().toISOString().split('T')[0], type, payment, fees, null, term, amort, ltv, newRelationship, totalProfit, null)", data_type: "currency" },
        { heading: "Profit Grade", id: "grade", column_type: "function", function: "loanProfitGrade(newProfit, newPrincipal, rate, term, amort, principal)", data_type: "string" }
    ]
    };
  </script>
  <script src="../../core/fi.js" defer></script>
</body>
</html>
